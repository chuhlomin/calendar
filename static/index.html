<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Grid</title>
<link rel="stylesheet" href="./styles.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@r-tek/colr_pickr@2.0.0/build/colr_pickr.min.css">
</head>
<body>
<div class="common">
    <div class="wrapper">
        <div class="panel">
            <h1>Grid</h1>
            <form action="" onsubmit="return false">
                <div class="field">
                    <legend>Paper Size: </legend>
                    <select name="size" id="pageSize" onchange="changePageSize(this)">
                        <option value="Letter" data-width="216" data-height="279">US Letter (8.50" × 11.00")</span></option>
                        <option value="Legal" data-width="216" data-height="356">US Legal (8.50" × 14.00")</span></option>
                        <option value="A1" data-width="594" data-height="841">A1 (594 × 841 mm)</option>
                        <option value="A2" data-width="420" data-height="594">A2 (420 × 594 mm)</option>
                        <option value="A3" data-width="297" data-height="420">A3 (297 × 420 mm)</option>
                        <option value="A4" data-width="210" data-height="297">A4 (210 × 297 mm)</option>
                        <option value="A5" data-width="148" data-height="210">A5 (148 × 210 mm)</option>
                    </select>
                </div>

                <div class="field">
                    <legend>Orientation:</legend>
                    <label><input type="radio" name="orientation" value="P" checked onclick="changeOrientation(this)"> Portrait</label>
                    <label><input type="radio" name="orientation" value="L" onclick="changeOrientation(this)"> Landscape</label>
                </div>

                <div class="field">
                    <legend>Pattern:</legend>
                    <div class="patterns">
                        <label class="pattern" tabindex="0">
                            <input type="radio" name="pattern" value="rect" checked onclick="changePattern(this)">
                            <div class="pattern-rect"></div>
                        </label>
                        <label class="pattern" tabindex="0">
                            <input type="radio" name="pattern" value="dot" onclick="changePattern(this)">
                            <div class="pattern-dot"></div>
                        </label>
                        <label class="pattern" tabindex="0">
                            <input type="radio" name="pattern" value="diamond" onclick="changePattern(this)">
                            <div class="pattern-diamond"></div>
                        </label>
                        <label class="pattern" tabindex="0">
                            <input type="radio" name="pattern" value="rhombus" onclick="changePattern(this)">
                            <div class="pattern-rhombus"></div>
                        </label>
                    </div>
                </div>

                <div class="field">
                    <label class="full-width-label">
                        <span>Pattern Size (mm):</span>
                        <input type="number" name="patternSize" value="5" min="1" max="100" onchange="changePatternSize(this)" onkeyup="changePatternSize(this)">
                    </label>
                </div>
                <div class="field">
                    <label class="full-width-label">
                        <span>Line width (nm):</span>
                        <input type="number" name="patternLineWidth" value="250" min="0" max="1000" onchange="changePatternLineWidth(this)" onkeyup="changePatternLineWidth(this)">
                    </label>
                </div>
                <div class="field">
                    <label for="picker" class="inline">Color:</label>
                    <button id="picker" type="button"></button>
                </div>

                <input type="submit" value="Download PDF" onclick="submitForm(this)">
            </form>
        </div>
        <div class="content">
            <div class="page">
                <svg id="svg" viewBox="0 0 210 297" preserveAspectRatio="xMidYMid meet">
                    <rect id="rect" fill="white" width="210" height="297"/>
                    <defs id="patterns"></defs>
                    <rect id="pattern" fill="url(#rect)" width="210" height="297" />
                </svg>
            </div>
        </div>
    </div>
</div>
<script src="./script.js"></script>
<script id="template_patterns" type="x-tmpl-mustache">
    <pattern id="rect" viewBox="0,0,{{ size }},{{ size }}" width="{{ size }}" height="{{ size }}" patternUnits="userSpaceOnUse">
        <rect width="{{ size }}" height="{{ size }}" style="fill:none;stroke:{{ color }};stroke-width:{{ lineWidth }}"/>
    </pattern>
    <pattern id="dot" viewBox="0,0,{{ size }},{{ size }}" width="{{ size }}" height="{{ size }}" patternUnits="userSpaceOnUse">
        <circle cx="0" cy="0" r="{{ lineWidth }}" fill="{{ color }}"/>
        <circle cx="{{ size }}" cy="0" r="{{ lineWidth }}" fill="{{ color }}"/>
        <circle cx="{{ size }}" cy="{{ size }}" r="{{ lineWidth }}" fill="{{ color }}"/>
        <circle cx="0" cy="{{ size }}" r="{{ lineWidth }}" fill="{{ color }}"/>
    </pattern>
    <pattern id="diamond" viewBox="0,0,{{ size }},{{ size }}" width="{{ size }}" height="{{ size }}" patternUnits="userSpaceOnUse">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M{{ sizeHalf }} 0 L{{ size }} {{ sizeHalf }} L{{ sizeHalf }} {{ size }} L0 {{ sizeHalf }} Z" fill="none" stroke="{{ color }}" stroke-width="{{ lineWidth }}">
    </pattern>
    <pattern id="rhombus" viewBox="0,0,{{ size }},{{ height }}" width="{{ size }}" height="{{ height }}" patternUnits="userSpaceOnUse">
        <path fill-rule="evenodd" clip-rule="evenodd" d="M{{ sizeHalf }} 0 L{{ size }} {{ heightHalf }} L{{ sizeHalf }} {{ height }} L0 {{ heightHalf }} Z" fill="none" stroke="{{ color }}" stroke-width="{{ lineWidth }}">
    </pattern>
</script>
<script src="https://cdn.jsdelivr.net/npm/@r-tek/colr_pickr@2.0.0/build/colr_pickr.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/mustache@4.2.0/mustache.min.js"></script>
</body>
</html>
